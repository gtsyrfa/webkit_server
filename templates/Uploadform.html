<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Загрузи-ка</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/main.css') }}">
</head>
<body>
<h1 align="center">Выберете файл и загрузите его</h1>
<form enctype="multipart/form-data" method="post" name="fileinfo" align="center">
  <input type="file" name="file" required />
  <br>
  <input type="submit" value="Upload the file!" />
</form>
<div></div>
<script>
var form = document.forms.namedItem("fileinfo");
form.addEventListener('submit', function(ev) {
  var oData = new FormData(form);
  var oReq = new XMLHttpRequest();
  var dialog = document.querySelector('dialog');
  oReq.open("POST", "{{url_for('index')}}", true);
  oReq.onload = function(oEvent) {
    if (oReq.status == 200) {
      alert(oReq.responseText)
      dialog.show();
    } else {
      document.getElementById("resulttext").innerHTML = "Error"
      dialog.show();
      //alert("Error " + oReq.status + " occurred when trying to upload your file")
    }
  };
  oReq.send(oData);
  ev.preventDefault();
}, false);



</script>
</body>
</html>